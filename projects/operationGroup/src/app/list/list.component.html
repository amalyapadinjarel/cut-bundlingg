<div>
    <perfect-scrollbar>
        <smd-datatable [dataUrl]="_shared.apiBase" dataHeader="operationGroup" (onRowSelected)="rowSelected($event)" (dataChange)="_onDataChange($event)"
            [rowCount]="_shared.count" (pageChange)="pageChanged($event)" [selectedPage]="_shared.selectedPage" [sortEnabled]="!_shared.editMode"
            [filterEnabled]="!_shared.editMode" [primaryListing]="false">
            <smd-datatable-column title=" " field=" " [colStyle]="{'width':'10px'}"  *ngIf="_shared.editMode">
                <ng-template let-model="data" let-index="index" >
                    <div class="row-operations" *ngIf= "_shared.getOpGrpEditable('shortCode',model.opId)" >
                        <mat-icon class="mat-color-danger" matTooltip="delete line" (click)="deleteLine(index)">delete</mat-icon>
                    </div>
                    <div class="row-operations" *ngIf= "!_shared.getOpGrpEditable('shortCode',model.opId)" >
                        <mat-icon class="mat-color-disabled-danger" matTooltip="delete line">delete</mat-icon>
                    </div>
                </ng-template>
            </smd-datatable-column>
            <smd-datatable-column title="Operation Group Code" field="shortCode" sortable="true" [filterable]="true" [colStyle]="{'width':'400px'}">
                <ng-template let-model="data" let-index="index">
                    <tnz-input class="text-upper" [path]="_shared.getOperationGroupAttrPath(index,'shortCode')" [primaryKey]="_shared.opGrpPrimaryKey"
                        [sharedData]="_shared.formData" [isEdit]="_shared.getOpGrpEditable('shortCode',model.opId)" [loading]=false validators="required"
                        (valueChanged)="validateData($event,index,'shortCode')">
                    </tnz-input>
                </ng-template>
            </smd-datatable-column>
            <smd-datatable-column title="Operation Group Name" field="opName" sortable="true" [filterable]="true" [colStyle]="{'width':'400px'}">
                <ng-template let-model="data" let-index="index">
                    <tnz-input type="text" [path]="_shared.getOperationGroupAttrPath(index,'opName')" [primaryKey]="_shared.opGrpPrimaryKey" validators="required"
                        [sharedData]="_shared.formData" [isEdit]="_shared.getOpGrpEditable('opName')" [loading]="false" (valueChanged)="validateData($event,index,'opName')">
                    </tnz-input>
                </ng-template>
            </smd-datatable-column>
            <smd-datatable-column title="Description" field="description" sortable="true" [filterable]="true" [colStyle]="{'width':'300px'}">
                <ng-template let-model="data" let-index="index">
                    <tnz-input type="text" [path]="_shared.getOperationGroupAttrPath(index,'description')" [primaryKey]="_shared.opGrpPrimaryKey"
                        [sharedData]="_shared.formData" [isEdit]="_shared.getOpGrpEditable('description')" [loading]=false (valueChanged)="validateData($event,index,'description')">
                    </tnz-input>
                </ng-template>
            </smd-datatable-column>
            <smd-datatable-column title="Active" field="active" sortable="true" [filterable]="true">
                <ng-template let-model="data" let-index="index">
                    <div *ngIf="!_shared.getOpGrpEditable('active')">
                        <mat-icon *ngIf="model.active=='Y'" style="color:green;font-size:20px;vertical-align: middle;" matTooltip="Active">check_circle</mat-icon>
                        <mat-icon *ngIf="model.active!='Y'" style="color:red;font-size:20px;vertical-align: middle;" matTooltip="Inactive">cancel</mat-icon>
                    </div>
                    <div *ngIf="_shared.getOpGrpEditable('active')">
                        <tnz-input type="checkbox" [path]="_shared.getOperationGroupAttrPath(index,'active')" [primaryKey]="_shared.opGrpPrimaryKey"
                            [sharedData]="_shared.formData" [isEdit]="_shared.getOpGrpEditable('active')" [loading]=false class="checkbox-center-align">
                        </tnz-input>
                    </div>
                </ng-template>
            </smd-datatable-column>
            <smd-datatable-column title="Created By" field="createdUser" sortable="true" [filterable]="true" [colStyle]="{'width':'225px'}">
                <ng-template let-model="data" let-index="index">
                    <tnz-input type="text" [path]="_shared.getOperationGroupAttrPath(index,'createdUser')" [primaryKey]="_shared.opGrpPrimaryKey"
                        [sharedData]="_shared.formData" [isEdit]="false" [loading]=false>
                    </tnz-input>
                </ng-template>
            </smd-datatable-column>
            <smd-datatable-column title="Created On" field="creationDateTr" sortable="true" [filterable]="true" [colStyle]="{'width':'180px'}">
                <ng-template let-model="data" let-index="index">
                    <tnz-input type="text" [path]="_shared.getOperationGroupAttrPath(index,'creationDateTr')" [primaryKey]="_shared.opGrpPrimaryKey"
                        [sharedData]="_shared.formData" [isEdit]="false" [loading]=false>
                    </tnz-input>
                </ng-template>
            </smd-datatable-column>
            <smd-datatable-column title="Modified By" field="lastUpdatedUser" sortable="true" [filterable]="true" [colStyle]="{'width':'200px'}">
                <ng-template let-model="data" let-index="index">
                    <tnz-input type="text" [path]="_shared.getOperationGroupAttrPath(index,'lastUpdatedUser')" [primaryKey]="_shared.opGrpPrimaryKey"
                        [sharedData]="_shared.formData" [isEdit]="false" [loading]=false>
                    </tnz-input>
                </ng-template>
            </smd-datatable-column>
            <smd-datatable-column title="Modified On" field="lastUpdatedDateTr" sortable="true" [filterable]="true" [colStyle]="{'width':'180px'}">
                <ng-template let-model="data" let-index="index">
                    <tnz-input type="text" [path]="_shared.getOperationGroupAttrPath(index,'lastUpdatedDateTr')" [primaryKey]="_shared.opGrpPrimaryKey"
                        [sharedData]="_shared.formData" [isEdit]="false" [loading]=false>
                    </tnz-input>
                </ng-template>
            </smd-datatable-column>
        </smd-datatable>
    </perfect-scrollbar>
</div>