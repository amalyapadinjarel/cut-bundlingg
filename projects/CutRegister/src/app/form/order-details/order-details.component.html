<smd-datatable [tableId]="_shared.appKey + '.prodlist'" [paginated]="!_shared.getOrderDetailsEditable()" [loading]="_shared.orderDetailsLoading"
 class="tnz-input-table" (onRowSelected)="onRowSelected()" (onAllRowsSelected)="onRowSelected()" [showCheckBox]="_shared.getOrderDetailsEditable()"
 [inputPath]="_shared.orderDetailsPath" (onAction)=onAction($event) title="Order Details">
	<ng-container *ngIf = "_shared.getOrderDetailsEditable()">
		<smd-datatable-icon-button icon="delete" key="delete" tooltip="delete line" class="mat-color-danger"></smd-datatable-icon-button>
		<smd-datatable-icon-button icon="developer_board" key="compute" class="mat-color-info"></smd-datatable-icon-button>
		<!-- <smd-datatable-icon-button icon="library_add" key="copyFrom" tooltip="add line" class="mat-color-success"></smd-datatable-icon-button> -->
		<smd-datatable-menu-button icon="library_add" key="copyFrom" [options]="copyFromOptions" tooltip="add line" class="mat-color-success"></smd-datatable-menu-button>
	</ng-container>
	<smd-datatable-column title=" " field=" " *ngIf="_shared.getOrderDetailsEditable()" [colStyle]="{'width':'20px'}">
		<ng-template let-model="data" let-index="index">
			<div class="row-operations">
				<mat-icon class="mat-color-danger" matTooltip="delete line" (click)="deleteLine(index,model)">delete</mat-icon>
			</div>
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="#" field="displayOrder" [sortable]="true" [filterable]="true" [colStyle]="{'width':'15px'}"
	 numeric="true">
		<ng-template let-model="data">
			{{model.displayOrder}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Ref. Doc#" field="refDocNo" sortable="true" [filterable]="true">
		<ng-template let-model="data">
			{{model.refDocNo}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Style" field="refProduct" sortable="true" [filterable]="true">
		<ng-template let-model="data">
			{{model.refProduct}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Style Attributes" field="refProdAttr" sortable="true" [filterable]="true" [stretch]="true">
		<ng-template let-model="data">
			<span [matTooltip]="model.refProdAttr">
				{{model.refProdAttr}}
			</span>
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Order Ref." field="bpartnerDocNo" sortable="true" [filterable]="true">
		<ng-template let-model="data">
			{{model.bpartnerDocNo}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Order Qty." field="lineQty" sortable="true" [filterable]="true" [numeric]="true">
		<ng-template let-model="data">
			{{model.lineQty}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Cut Allow(%)" field="cutAllowancePercent" sortable="true" [filterable]="true" [numeric]="true">
		<ng-template let-model="data" let-index="index">
			<span *ngIf="!_shared.getOrderDetailsEditable('cutAllowancePercent')">{{model.cutAllowancePercent}}</span>
			<div *ngIf="_shared.getOrderDetailsEditable('cutAllowancePercent')">
				<tnz-input type="number" [path]="_shared.getOrderDetailsPath(index,'cutAllowancePercent')" [primaryKey]="_shared.orderDetailsPrimaryKey"
				 [sharedData]="_shared.formData" validators="min:0" [isEdit]="_shared.getOrderDetailsEditable('cutAllowancePercent')"
				 [loading]="_shared.orderDetailsLoading || _shared.loading" (valueChangedFromUI)="valueChangedFromUI($event, index)">
				</tnz-input>
			</div>
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Cut Allow Qty." field="cutAllowanceQty" sortable="true" [filterable]="true" [numeric]="true">
		<ng-template let-model="data" let-index="index">
			<span *ngIf="!_shared.getOrderDetailsEditable('cutAllowanceQty')">{{model.cutAllowanceQty}}</span>
			<div *ngIf="_shared.getOrderDetailsEditable('cutAllowanceQty')">
				<tnz-input type="number" [path]="_shared.getOrderDetailsPath(index,'cutAllowanceQty')" [primaryKey]="_shared.orderDetailsPrimaryKey"
				 [sharedData]="_shared.formData" validators="min:0" [isEdit]="_shared.getOrderDetailsEditable('cutAllowanceQty')" [loading]="_shared.orderDetailsLoading || _shared.loading"
				 (valueChangedFromUI)="valueChangedFromUI($event, index)" decimals="0">
				</tnz-input>
			</div>
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Order Qty.+Allow" field="totalOrderQty" sortable="true" [filterable]="true" [numeric]="true">
		<ng-template let-model="data" let-index="index">
			<span *ngIf="!_shared.getOrderDetailsEditable('totalOrderQty')">{{model.totalOrderQty}}</span>
			<div *ngIf="_shared.getOrderDetailsEditable('totalOrderQty')">
				<tnz-input type="number" [path]="_shared.getOrderDetailsPath(index,'totalOrderQty')" [primaryKey]="_shared.orderDetailsPrimaryKey"
				 [sharedData]="_shared.formData" validators="min:0" [isEdit]="false" [loading]="_shared.orderDetailsLoading || _shared.loading">
				</tnz-input>
			</div>
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Max Allow Qty." field="allwdQty" sortable="true" [filterable]="true" [numeric]="true" [colStyle]="{'min-width': '60px'}">
		<ng-template let-model="data">
			{{model.allwdQty}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Prev Cut Qty." field="prevqty" sortable="true" [filterable]="true" [numeric]="true">
		<ng-template let-model="data">
			{{model.prevqty}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Combo" field="combo" sortable="true" [filterable]="true">
		<ng-template let-model="data">
			{{model.combo}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Kit" field="kit" sortable="true" [filterable]="true">
		<ng-template let-model="data">
			{{model.kit}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Customer" field="bpartName" sortable="true" [filterable]="true">
		<ng-template let-model="data">
			{{model.bpartName}}
		</ng-template>
	</smd-datatable-column>
	<smd-datatable-column title="Ref Doc Date" field="refDocDate" sortable="true" [filterable]="true">
		<ng-template let-model="data">
			{{model.refDocDate}}
		</ng-template>
	</smd-datatable-column>
</smd-datatable>